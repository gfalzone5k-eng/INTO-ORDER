<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>ScanOrdini</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script>
  const store = localStorage.getItem("store");
  if (!store) {
    window.location.href = "login.html";
  }
</script>

<header class="header">
  <div class="logo">ðŸ“¦</div>
  <div>
    <h1>ScanOrdini</h1>
    <p>Sistema ordini con scanner</p>
    <p class="store-name">Negozio: <strong id="storeName"></strong></p>
  </div>
  <button class="logout-btn" onclick="logout()">Logout</button>
</header>

<div class="container">

  <div class="search-box">
    <input type="text" id="barcodeInput"
      placeholder="Scansiona o digita codice a barre..."
      onkeypress="handleEnter(event)">
    <button onclick="startScanner()">ðŸ“·</button>
    <button onclick="addProduct()">âž•</button>
  </div>

  <div id="reader" style="display:none;"></div>

  <div class="main-grid">

    <div class="cart">
      <h3>CARRELLO</h3>
      <ul id="cartList">
        <p class="empty">Scansiona un prodotto per iniziare</p>
      </ul>
    </div>

    <div class="summary">
      <p>Articoli <span id="totalItems">0</span></p>
      <p>Prodotti diversi <span id="differentItems">0</span></p>
      <h2>Totale â‚¬<span id="totalPrice">0.00</span></h2>
      <button class="confirm" onclick="confirmOrder()">âœ” Conferma Ordine</button>
    </div>

  </div>

</div>



<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://unpkg.com/html5-qrcode"></script>
<script src="script.js"></script>

<script>
  document.getElementById("storeName").innerText = localStorage.getItem("store");

  function logout() {
    localStorage.removeItem("store");
    window.location.href = "login.html";
  }
</script>

</body>
</html>
